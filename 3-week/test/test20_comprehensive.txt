fibonacci(n) {
  var a, b, temp, i;
  if (n == 0) {
    return 0;
  }
  if (n == 1) {
    return 1;
  }

  a = 0;
  b = 1;
  i = 2;

  while (i <= n) {
    temp = a + b;
    a = b;
    b = temp;
    i = i + 1;
  }

  return b;
}

store_fibonacci(ptr, count) {
  var i;
  i = 0;
  while (i < count) {
    *(ptr + i) = fibonacci(i);
    i = i + 1;
  }
  return 0;
}

main() {
  var fib_array, i, sum, current;
  fib_array = alloc 10;

  store_fibonacci(fib_array, 10);

  sum = 0;
  i = 0;
  while (i < 10) {
    current = *(fib_array + i);
    sum = sum + current;
    output current;
    i = i + 1;
  }

  return sum;
}
